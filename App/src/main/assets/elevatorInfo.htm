<!DOCTYPE html>
<!-- saved from url=(0053)http://elevator.hbydt.cn/analysis/index?sn=1234567890 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>电梯数据分析</title>
	<link rel="stylesheet" href="style.css" type="text/css" media="all">
	<script src="jquery.min.js" type="text/javascript"></script>
	<script src="echarts.min.js" type="text/javascript"></script>
	<script src="roma.js" type="text/javascript"></script>
	<script src="macarons.js" type="text/javascript"></script>
	<script src="shine.js" type="text/javascript"></script>
	<script src="infographic.js" type="text/javascript"></script>
	<script src="westeros.js" type="text/javascript"></script>
	<script src="walden.js" type="text/javascript"></script>
	<script src="base.js" type="text/javascript"></script>
	<script src="analysis_show.js" type="text/javascript"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
	<div class="row0"><p class="state">门开/关:<span style="color:#5bb456">正常</span> | 电压/电流:<span style="color:#5bb456">正常</span> | 评审:<span style="color:#5bb456">正常</span></p><p class="title">电梯数据分析</p></div>
	<div class="row1">
		<div id="acc" class="acc" _echarts_instance_="ec_1499934925168" style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: rgba(252, 252, 252, 0);"><div style="position: relative; overflow: hidden; width: 1200px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas width="2400" height="800" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 1200px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1); background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 14px; font-family: sans-serif; line-height: 21px; padding: 5px; left: 885px; top: 166px;">第7秒<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#3fb1e3;"></span>最小加速度: 0<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#6be6c1;"></span>实际加速度: 0<br><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:#a0a7e6;"></span>最大加速度: 0</div></div>
		<div id="speed" class="speed" _echarts_instance_="ec_1499934925169" style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: rgba(252, 252, 252, 0);"><div style="position: relative; overflow: hidden; width: 1200px; height: 400px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="2400" height="800" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 1200px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
	</div>
	<div class="row2">
		<div id="flowrate" class="flowrate" _echarts_instance_="ec_1499934925170" style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: rgba(252, 252, 252, 0);"><div style="position: relative; overflow: hidden; width: 1200px; height: 400px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="2400" height="800" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 1200px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
		<div id="totalflowrate" class="totalflowrate" _echarts_instance_="ec_1499934925171" style="-webkit-tap-highlight-color: transparent; user-select: none; position: relative; background: rgba(252, 252, 252, 0);"><div style="position: relative; overflow: hidden; width: 1200px; height: 400px; padding: 0px; margin: 0px; border-width: 0px;"><canvas width="2400" height="800" data-zr-dom-id="zr_0" style="position: absolute; left: 0px; top: 0px; width: 1200px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
	</div>
    <script type="text/javascript">   	
			var startTimeStamp = 1498523943000;
			var lastTimeStamp = 1498523943000;
			window.onload = function() {
				//elevatorSn = GetQueryString('sn');
				elevatorSn = 'e47d5a000003';
				getAnalysisReference();
				//alert(obj2string(analysisReference));		
				getAnalysisAcc(startTimeStamp);
				getAnalysisVeloc(startTimeStamp);
				getAnalysisTraffic(startTimeStamp);	
				getAnalysisTrajectory(startTimeStamp);
			}
			
	</script>		
	 <script type="text/javascript">     		
                // 基于准备好的dom，初始化echarts图表
                var myChart_acc = echarts.init(document.getElementById('acc'),'walden'); 
                				
                var option_acc = {
				baseOption: {
					timeline: {
						// y: 0,
						axisType: 'category',
						// realtime: false,
						// loop: false,
						autoPlay: true,
						// currentIndex: 2,
						playInterval: 5000,
						// controlStyle: {
						//     position: 'left'
						// },
						data: [],
						/*
						label: {
							formatter : function(s) {
								return (new Date(s)).getFullYear();
							}
						}*/
					},
					title: {
								text: '加速度数据变化',
								subtext: 'SN:'+GetQueryString('sn')
					},
					tooltip: {
					},
					legend: {
						x: 'right',
						data: ['最小加速度', '实际加速度', '最大加速度'],
						
					},
					calculable : true,
					grid: {
						show: true,
						top: 80,
						bottom: 80,
						tooltip: {
							trigger: 'axis',
							axisPointer: {
								type: 'shadow',
								label: {
									show: false,
									formatter: function (params) {
										return '第'+params.value.replace('\n', '')+'秒';
									}
								}
							}
						}
					},
					xAxis: [
								{
									type : 'category',
									boundaryGap : false,
									data : []
								}
					],
					yAxis : [
								{
									type : 'value',
									scale: true,
									name : '加速度值',
									boundaryGap: [0.01, 0.01],
									splitNumber: 10
								}
							],
					series: [
						{
							name: '最小加速度', 
							type: 'line', 
							lineStyle: {
								normal: {
									type: 'dotted'
								}
							}
						},
						{name: '实际加速度', type: 'line'},
						{
							name: '最大加速度', 
							type: 'line',
							lineStyle: {
								normal: {
									type: 'dashed'
								}
							}
						}
					]
				},
				options: [
				]
			};
    </script>
	<script type="text/javascript">
      
                // 基于准备好的dom，初始化echarts图表
                var myChart_speed = echarts.init(document.getElementById('speed'),'walden'); 
                				
                var option_speed = {
				baseOption: {
					timeline: {
						// y: 0,
						axisType: 'category',
						// realtime: false,
						// loop: false,
						autoPlay: true,
						// currentIndex: 2,
						playInterval: 5000,
						// controlStyle: {
						//     position: 'left'
						// },
						data:[],
						/*
						label: {
							formatter : function(s) {
								return (new Date(s)).getFullYear();
							}
						}*/
					},
					title: {
								text: '速度数据变化',
								subtext: 'SN:'+GetQueryString('sn')
					},
					tooltip: {
					},
					legend: {
						x: 'right',
						data: ['实际速度']						
					},
					calculable : true,
					grid: {
						top: 80,
						bottom: 80,
						tooltip: {
							trigger: 'axis',
							axisPointer: {
								type: 'shadow',
								label: {
									show: true,
									formatter: function (params) {
										return '第'+ params.value.replace('\n', '') + '秒';
									}
								}
							}
						}
					},
					xAxis: [
						{
									type : 'category',
									boundaryGap : false,
									data : []
								}
					],
					yAxis : [
								{
									type : 'value',
									scale: true,
									name : '速度值',
									boundaryGap: [0.01, 0.01],
									min: 2.5,
									max: -2.5,
									splitNumber: 10
								}
							],
					series: [
						{
							name: '实际速度', 
							type: 'line',
							markLine : {
								lineStyle:{
												normal:{
													color: '#ffb980',
													width: 2
												}
											}
							}							
						}
					]
				},
				options: []
			};
    </script>
	<script type="text/javascript">
                // 基于准备好的dom，初始化echarts图表
                var myChart_flowrate = echarts.init(document.getElementById('flowrate'),'walden'); 
                
				var option_flowrate = {
					title : {
					text: '实时电梯运行次数分析',
					subtext: 'SN:'+GetQueryString('sn')
				},
					tooltip: {
						trigger: 'axis',
						axisPointer: {
							type: 'cross',
							label: {
								backgroundColor: '#333'
							}
						}
					},
					legend: {
						x: 'right',
						data:['累计次数', '单位时间次数']
					},
					toolbox: {
						show: false,
						feature: {
							dataView: {readOnly: false},
							restore: {},
							saveAsImage: {}
						}
					},
					dataZoom: {
						show: false,
						start: 0,
						end: 100
					},					
					grid: {
						top: 80,
						bottom: 40
					},
					xAxis: [
						{
							type: 'category',
							boundaryGap: true,
							data:[]
						}
					],
					yAxis: [
						{
							type: 'value',
							scale: true,
							name: '单位次数',
							min: 0,
							boundaryGap: [0.2, 0.2]
						},
						{
							type: 'value',
							scale: true,
							name: '累计次数',
							min: 0,
							boundaryGap: [0.2, 0.2]
						}
					],
					series: [
						{
							name:'单位时间(5分钟)内次数',
							type:'bar',
							itemStyle: {
								normal: {
									color: '#2ec7c9'
								}
							},
							data:[]
						},
						{
							name:'累计次数',
							type:'line',
							itemStyle: {
								normal: {
									color: '#ffb980'
								}
							},
							yAxisIndex: 1,
							data:[]
						}
					]
				};
				myChart_flowrate.setOption(option_flowrate);		
    </script>
	
	<script type="text/javascript">
                // 基于准备好的dom，初始化echarts图表
                var myChart_totalflowrate = echarts.init(document.getElementById('totalflowrate'),'walden'); 
                
                var option_totalflowrate = {
				baseOption: {
					timeline: {
						// y: 0,
						axisType: 'category',
						// realtime: false,
						// loop: false,
						autoPlay: true,
						// currentIndex: 2,
						playInterval: 2000,
						// controlStyle: {
						//     position: 'left'
						// },
						checkpointStyle:{
							color: ['#a0a7e6']
						},
						data: [],
						/*
						label: {
							formatter : function(s) {
								return (new Date(s)).getFullYear();
							}
						}*/
					},
					title: {
								text: '电梯负载数据分析(单位：次)',
								subtext: 'SN:'+GetQueryString('sn')
					},
					tooltip: {
					},
					legend: {
						x: 'right',
						data: ['负载次数'],
						
					},
					calculable : true,
					grid: {
						top: 80,
						bottom: 80,
						tooltip: {
							trigger: 'axis',
							axisPointer: {
								type: 'shadow',
								label: {
									show: true,
									formatter: function (params) {
										return params.value.replace('\n', '');
									}
								}
							}
						}
					},
					xAxis: [
						{
									type : 'category',
									boundaryGap : true,
									data : []
								}
					],
					yAxis : [
								{
									type : 'value',
									scale: true,
									name : '次数',
									boundaryGap: [0, 0],
									min: 0
								}
							],
					series: [
						{
							name: '负载次数', 
							type: 'bar',
							itemStyle: {
								normal: {
									color: '#a0a7e6'
								}
							} 
						}
					]
				},
				options: []
			};
                // 为echarts对象加载数据 
                myChart_totalflowrate.setOption(option_totalflowrate); 
    </script>
</body></html>